<!-- Copyright© 2016 Vincent Bisogno, François Desrichard, Enguerrand de Ribaucourt, Pierre Ucla

This file is part of Serval Audio Editor.

Serval Audio Editor is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>. -->


<!-- This is the main page which provides the full application through his web browser.

***************************************************************************************
Code starts here                                                                    -->

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 5.01//EN"
    "http://www.w3.org/TR/html5/strict.dtd">
<html lang="en">

  <head>

              <!-- ************* Head Tag ************ -->

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Serval Audio Editor</title>
    <link rel="stylesheet" type="text/css" href="style.css">

  </head>

  <body>

              <!-- ************* Body Tag ************ -->

      <!-- ************* Disclaimer Popup ************ -->

      <!-- ************* Loading Popup ************ -->

  <div id="loadingPopup" class="popup">
    <img src="icons/loading.gif" />
  </div>
      
      <!-- ************* Projects Popup ************ -->

      <div id="projectsPopup" class="popup" style="left:0; width:40%; height:auto">

          <ul>
              <li class="filtersPopup"><img src="icons/close.png" class="filtersPopup" style="width:30px; height:30px" onClick="toggleProjectsPopup(false)" /></li>
              <li class="filtersPopup"><img src="icons/fade_in.png" class="filtersPopup" />Fade in : <a class="button" style="float:none">linear</a><a class="button" style="float:none">exponential</a><a class="button" style="float:none">logarithmic</a></li>
              <li class="filtersPopup"><img src="icons/fade_out.png" class="filtersPopup" />Fade out : <a class="button" style="float:none">linear</a><a class="button" style="float:none">exponential</a><a class="button" style="float:none">logarithmic</a></li>
              <li class="filtersPopup"><img src="icons/mix.png" class="filtersPopup" />Mix tracks : <a class="button" style="float:none">2 tracks</a><a class="button" style="float:none">3 tracks</a><a class="button" style="float:none">4 tracks</a></li>
              <li class="filtersPopup"><img src="icons/deconvolve.png" class="filtersPopup" />Convolve : <a class="button" style="float:none" onclick="addFilter(0)">from track</a><a class="button" style="float:none">from file</a></li>
          </ul>
      </div>

      <!-- ************* Filters Popup ************ -->

      <div id="filtersPopup" class="popup" style="left:60%; width:40%; height:auto">

          <ul>
              <li class="filtersPopup"><img src="icons/close.png" class="filtersPopup" style="width:30px; height:30px" onClick="toggleFiltersPopup(false)" /></li>
              <li class="filtersPopup"><img src="icons/fade_in.png" class="filtersPopup" />Fade in : <a class="button" style="float:none">linear</a><a class="button" style="float:none">exponential</a><a class="button" style="float:none">logarithmic</a></li>
              <li class="filtersPopup"><img src="icons/fade_out.png" class="filtersPopup" />Fade out : <a class="button" style="float:none">linear</a><a class="button" style="float:none">exponential</a><a class="button" style="float:none">logarithmic</a></li>
              <li class="filtersPopup"><img src="icons/mix.png" class="filtersPopup" />Mix tracks : <a class="button" style="float:none">2 tracks</a><a class="button" style="float:none">3 tracks</a><a class="button" style="float:none">4 tracks</a></li>
              <li class="filtersPopup"><img src="icons/deconvolve.png" class="filtersPopup" />Convolve : <a class="button" style="float:none" onclick="addFilter(0)">from track</a><a class="button" style="float:none">from file</a></li>
          </ul>
      </div>

      <!-- ************* Home Page ************ -->

    <div id="topContainer" style="width:100%;height:100%;">

      <div id="headerContainer" style="width:100%;height:20%;">
        <div id="fileManageContainer" style="width:20%;height:100%;">
          <a href="#" id="serverProjectDownload" title="Download project from server" style="width: 50%; height:33%;" class="button" onclick="retrieveProjects()"><img src="icons/multimedia.png" /></a>
          <a href="#" id="serverProjectUpload" title="Upload project to server" style="width: 50%; height:33%;" class="button" onclick="exportProject()"><img src="icons/upload.png" /></a>
          <br style="clear:left" />

          <input type="file" class="inputfile" id="importButton" name="files[]" multiple /><label title="Import music track"  style="width: 50%; height:33%;" for="importButton"></label>
          <a href="#" id="exportFileButton" title="Export music" style="width: 50%; height:33%;" class="button"><img src="icons/up-arrow.png" /></a>
          <br style="clear:left" />

          <div style="float:left;width:100%;height:33%;"><input id="projectNameInput" type="text" value="project name" /></div>
        </div>
        <div id="titleContainer" style="width: 70%;height: 100%;">
          <span style="font-size:50%; float:none">Copyright© 2016 Vincent Bisogno, François Desrichard, Enguerrand de Ribaucourt, Pierre Ucla -
          <span style="font-style:italic; float:none">icons by <a href="http://www.flaticon.com/authors/madebyoliver" class="creditLink">Madebyoliver</a> and <a href="http://www.flaticon.com/authors/butterflytronics" class="creditLink">butterflytronics</a></span></span>
        </div>
        <div id="filterButtonContainer" style="width:10%; height:100%;">
          <a href="#" id="filterButton" title="Apply filters" class="button" style="width:100%; height:100%;" onclick="toggleFiltersPopup(true)"><img src="icons/witch.png" /></a>
        </div>
      </div>
      <br style="clear:left" />

      <div id="toolsContainer" style="width:100%;height:10%;">
        <div id="playbackControllContainer" style="width:30%;height:100%;">
          <a href="#" id="rewindButton" title="Rewind" class="button" style="width:33%;height:100%;"><img src="icons/arrows.png" /></a>
          <a href="#" id="PlayButton" title="Play/Pause" class="playButton" onclick="listenToAll(1)" style="width:33%;height:100%;"><img src="icons/play-button.png" id="playResume" /></a>
          <a href="#" id="stopButton" title="Stop" class="button" onclick="listenToAll(0)" style="width:33%;height:100%;"><img src="icons/stop.png" /></a>
        </div>
        <div id="editionToolsContainer" style="width:30%;height:100%;">
          <a href="#" id="copyButton" title="Copy" class="button" style="width:33%;height:100%;"><img src="icons/copy-archive.png" /></a>
          <a href="#" id="cutButton" title="Cut" class="button" style="width:33%;height:100%;"><img src="icons/scissors.png" /></a>
          <a href="#" id="pasteButton" title="Paste" class="button" style="width:33%;height:100%;"><img src="icons/paste-file.png" /></a>
        </div>
        <div id="tracksToolsContainer" style="width:20%;height:100%;">
          <a href="#" id="newTrackButton" title="New track" class="button" style="width:50%;height:100%;"><img src="icons/plus.png" /></a>
          <a href="#" id="cloneTrackButton" title="Clone track" class="button" style="width:50%;height:100%;"><img src="icons/circle.png" /></a>
        </div>
        <div id="tracksToolsContainer" style="width:20%;height:100%;">
          <a href="#" id="undoButton" title="Undo" class="button" style="width:50%;height:100%;"><img src="icons/back.png" /></a>
          <a href="#" id="redoButton" title="Redo" class="button" style="width:50%;height:100%;"><img src="icons/forward.png" /></a>
        </div>
      </div>
      <br style="clear:left" />

      <div id="timelineContainer" class="containerWithBorder" style="width: 100%; height:5%;">
        <div id="globalTimelineContainer" style="width: 20%; height:100%;">   <!-- TODO: rename this globalVolumeContainer in all files -->
          <a href="#" id="globalMuteButton" title="Mute all" class="muteButton"><img src="icons/multimedia-1.png" id="globalMuteIcon" style="display:none;" /></a>
          <input id="globalVolumeControl" title="Volume" class="volumeControl" type="range" value="0" max="100" min="0" step="1"></input>
        </div>
        <div id="localTimelineContainer" style="width: 80%; height:100%;"><canvas id="timelineCanvas" style="width: 100%; height:100%;" /></div>
      </div>
      <br style="clear:left" />

      <div id="tracksContainer" class="containerWithBorder" ondrop="drop(event)" ondragover="allowDrop(event)" style="width:100%;height:75%;overflow-y:scroll;">
        <h2 id="tracksInsertMessage">Insérez vos pistes ici</h2>

        <script>    // IMPORT AND DRAW RECORD TRACK
          console.log("painting record track last");
          var ajax = new XMLHttpRequest();    // get the HTML code for record track
          ajax.open("GET", "record.html", true);
          ajax.onload = function() {
            document.getElementById("tracksContainer").innerHTML += ajax.responseText;
            setTimeout( function() {      // Add interactivity
              document.getElementById("recordButton").addEventListener("click",onRecordButtonPress);
            }, 1);
          }
          ajax.send();
        </script>

      </div>

      <div id="cursor">
      </div>

    </div>

    <!-- Scripts import -->
    <script>var audioContext = new AudioContext() ;</script>
    <script type="text/javascript" src="script\server.js"></script>
    <script type="text/javascript" src="script\signalProcessing.js"></script>
    <script type="text/javascript" src="script\playback.js"></script>
    <script type="text/javascript" src="script\record.js"></script>
    <script type="text/javascript" src="script\interface.js"></script>
    <script type="text/javascript" src="script\main.js"></script>

  </body>

</html>
