<!-- Copyright© 2016 Vincent Bisogno, François Desrichard, Enguerrand de Ribaucourt, Pierre Ucla

This file is part of Serval Audio Editor.

Serval Audio Editor is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>. -->


<!-- This is the main page which provides the full application through his web browser.

***************************************************************************************
Code starts here                                                                    -->

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 5.01//EN"
    "http://www.w3.org/TR/html5/strict.dtd">

<html lang="en">

<head>
<!-- ************* Head Tag ************ -->
	
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<title>Serval Audio Editor</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	
</head>

<body>
<!-- ************* Body Tag ************ -->
	
	<!-- ************* Disclaimer Popup ************ -->
	
	<!-- ************* Loading Popup ************ -->
	<div id="loadingPopup" class="popup">
		<img src="icons/loading.gif" />
	</div>
	
	<!-- ************* Projects Popup ************ -->
	<div id="projectsPopup" class="popup" style="left:0; top:30px; width:auto; height:auto; display:none; border-width:0 1px;">
		<ul style="width:100%">
			<li class="listChoice" style="padding-left:6px"><img src="icons/project_new.png" class="listChoice" />New</li>
			<li class="listChoice" style="padding-left:6px"><img src="icons/project_load_computer.png" class="listChoice" />Load from computer</li>
			<li class="listChoice" style="background-color:#ffffff; cursor:default;">Load from server :</li>
			<div id="projectsPopupContainer"></div>
			<br style="clear:left" />
			<li class="listSeparator"></li>
			<li class="listChoice" style="padding-left:6px"><img src="icons/project_save_computer.png" class="listChoice" />Save to computer</li>
			<li class="listChoice">Save to server</li>
			<li class="listChoice">Export to audio file</li>
			<li class="listSeparator"></li>
			<li class="listChoice" onclick="window.location.assign('about:home')">Close Serval</li>
		</ul>
	</div>
	
	<!-- ************* Tracks Popup ************ -->
	<div id="tracksPopup" class="popup" style="left:10%; top:30px; width:auto; height:auto; display:none; border-width:0 1px 1px 1px;">
		<ul style="width:100%">
			<li class="listChoice">Add from file</li>
			<li class="listChoice">Add from record</li>
			<li class="listChoice">Add from render</li>
			<li class="listSeparator"></li>
			<li class="listChoice">Remove</li>
		</ul>
	</div>
	
	<!-- ************* Filters Popup ************ -->
	<div id="filtersPopup" class="popup" style="left:60%; width:40%; height:auto">
		<ul>
			<li class="simpleList"><img src="icons/close.png" class="filtersPopup" style="width:30px; height:30px" onClick="toggleFiltersPopup(false)" /></li>
			<li class="simpleList"><img src="icons/megaphone.png" class="filtersPopup" />Gain : <input type="text" id="trackValueInput"><input type="text" id="gainValueInput"><a class="button" onclick="applyGain();">Apply</a></li>
			<li class="simpleList">Deconvolve : <input type="text" id="deconvolveTrack1"><input type="text" id="deconvolveTrack2"><a class="button" onclick="applyDeconvolve();">Apply</a><a class="button" onclick="addTrack(genSin());">addSin</a></li>
			<li class="simpleList"><img src="icons/fade_in.png" class="filtersPopup" />Fade in : <a class="button" style="float:none">linear</a><a class="button" style="float:none">exponential</a><a class="button" style="float:none">logarithmic</a></li>
			<li class="simpleList"><img src="icons/fade_out.png" class="filtersPopup" />Fade out : <a class="button" style="float:none">linear</a><a class="button" style="float:none">exponential</a><a class="button" style="float:none">logarithmic</a></li>
			<li class="simpleList"><img src="icons/mix.png" class="filtersPopup" />Mix tracks : <a class="button" style="float:none">2 tracks</a><a class="button" style="float:none">3 tracks</a><a class="button" style="float:none">4 tracks</a></li>
			<li class="simpleList"><img src="icons/deconvolve.png" class="filtersPopup" />Convolve : <a class="button" style="float:none" onclick="addFilter(0)">from track</a><a class="button" style="float:none">from file</a></li>
		</ul>
	</div>
	
	<!-- ************* Home Page ************ -->
	<div id="topContainer" style="width:100%; height:100%;">
		
		<div id="headerContainer" style="width:100%; height:30px; box-shadow:2px 2px;">
			<div id="projectMenuButton" onclick="togglePopup(this, 'projectsPopup', retrieveProjects)" class="menuButton" style="width:10%; height:100%; border-left-width:1px;">Project</div>
			<div id="tracksMenuButton" onclick="togglePopup(this, 'tracksPopup', function(){})" class="menuButton" style="width:10%; height:100%; border-left-width:1px;">Tracks</div>
			<input id="projectNameInput" type="text" value="My Project" class="menuInput" style="width:60%; height:100%;"/>
			<div id="aboutMenuButton" class="menuButton" style="width:20%; height:100%; border-right-width:1px;">About Serval</div>
		</div>
		<br style="clear:left" />
		
		<div style="width:100%; height:30px; background-color:#ffffff; box-shadow:-1px -1px black inset;"></div>
		
		<div id="toolsContainer" style="width:100%; height:10%;">
			<div id="playbackControllContainer" style="width:30%;height:100%;">
				<a href="#" id="rewindButton" title="Rewind" class="button" style="width:33%;height:100%;" onclick="rewind()"><img src="icons/arrows.png" /></a>
				<a href="#" id="playButton" title="Play/Pause" class="playButton" onclick="listenToAll(1)" style="width:33%;height:100%;"><img src="icons/play-button.png" id="playResume" /></a>
				<a href="#" id="stopButton" title="Stop" class="button" onclick="listenToAll(0)" style="width:33%;height:100%;"><img src="icons/stop.png" /></a>
			</div>
			<div id="editionToolsContainer" style="width:30%;height:100%;">
				<a href="#" id="copyButton" title="Copy" class="button" style="width:33%;height:100%;"><img src="icons/copy-archive.png" /></a>
				<a href="#" id="cutButton" title="Cut" class="button" style="width:33%;height:100%;"><img src="icons/scissors.png" /></a>
				<a href="#" id="pasteButton" title="Paste" class="button" style="width:33%;height:100%;"><img src="icons/paste-file.png" /></a>
			</div>
			<div id="tracksToolsContainer" style="width:20%;height:100%;">
				<a href="#" id="newTrackButton" title="New track" class="button" style="width:50%;height:100%;"><img src="icons/plus.png" /></a>
				<a href="#" id="cloneTrackButton" title="Clone track" class="button" style="width:50%;height:100%;"><img src="icons/circle.png" /></a>
			</div>
			<div id="tracksToolsContainer" style="width:20%;height:100%;">
				<a href="#" id="undoButton" title="Undo" class="button" onclick="undo();" style="width:50%;height:100%;"><img src="icons/back.png" /></a>
				<a href="#" id="redoButton" title="Redo" class="button" onclick="redo();" style="width:50%;height:100%;"><img src="icons/forward.png" /></a>
			</div>
		</div>
		<br style="clear:left" />
		
		<div id="timelineContainer" class="containerWithBorder" style="width: 100%; height:5%;">
			<div id="globalTimelineContainer" style="width: 20%; height:100%;">   <!-- TODO: rename this globalVolumeContainer in all files -->
				<a href="#" id="globalMuteButton" title="Mute all" class="muteButton"><img src="icons/multimedia-1.png" id="globalMuteIcon" style="display:none;" /></a>
				<input id="globalVolumeControl" title="Volume" class="volumeControl" type="range" value="0" max="100" min="0" step="1" />
		</div>
		<div id="localTimelineContainer" style="width: 80%; height:100%;"><canvas id="timelineCanvas" style="width: 100%; height:100%;" /></div>
	</div>
	<br style="clear:left" />
	
	<div id="tracksContainer" class="containerWithBorder" ondrop="drop(event)" ondragover="allowDrop(event)" style="width:100%;height:75%;overflow-y:scroll;">
		<h2 id="tracksInsertMessage">Insérez vos pistes ici</h2>
	</div>
	
	<div id="cursor">
	</div>
	
	</div>
	
	<!-- Scripts import -->
	<script>var audioContext = new AudioContext() ;</script>
	<script type="text/javascript" src="script\server.js"></script>
	<script type="text/javascript" src="script\signalProcessing.js"></script>
	<script type="text/javascript" src="script\deconvolve.js"></script>
	<script type="text/javascript" src="script\playback.js"></script>
	<script type="text/javascript" src="script\record.js"></script>
	<script type="text/javascript" src="script\interface.js"></script>
	<script type="text/javascript" src="script\controler.js"></script>
	<script type="text/javascript" src="script\filterInterface.js"></script>
	<script type="text/javascript" src="script\main.js"></script>
	
	<script>    // IMPORT AND DRAW RECORD TRACK
		console.log("painting record track last");
		document.getElementById("tracksContainer").innerHTML += recordTemplate;
		setTimeout( function() {      // Add interactivity
			document.getElementById("recordButton").addEventListener("click",onRecordButtonPress);
		}, 1);
	</script>
	
</body>

</html>